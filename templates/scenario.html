{% extends "layout.html" %}

{% block title %}Cen√°rio {{ current_scenario_number }} - {{ super() }}{% endblock %}

{% block content %}
    {# Barra de Progresso e Contagem #}
    <div class="mb-6">
        {# Barra de progresso - Usando div simples por enquanto, estiliza√ß√£o vir√° do Tailwind #}
        <div class="w-full bg-green-100 dark:bg-green-900 rounded-full h-2">
            <div class="bg-green-600 dark:bg-green-400 h-2 rounded-full" style="width: {{ progress }}%" id="progress-bar"></div>
        </div>
        <p class="text-sm text-gray-500 dark:text-gray-400 text-right mt-1" id="scenario-counter">
            Cen√°rio {{ current_scenario_number }} de {{ total_scenarios }}
        </p>
    </div>

    {# Card do Cen√°rio #}
    {# Tentativa de replicar a estrutura do Card do shadcn/ui com divs e classes Tailwind #}
    <div class="mb-8 border border-green-200 dark:border-green-800 rounded-lg shadow-sm bg-white dark:bg-gray-800">
        {# Cabe√ßalho do Card #}
        <div class="bg-green-50 dark:bg-green-950/30 rounded-t-lg text-center p-4 border-b border-green-200 dark:border-green-800">
            <h2 class="text-xl font-semibold text-green-800 dark:text-green-200" id="scenario-title">{{ scenario.title }}</h2>
        </div>
        {# Conte√∫do do Card #}
        <div class="p-6">
            {# Placeholder para Imagem/Emoji #}
            <div class="w-full h-48 bg-green-100 dark:bg-green-900/50 rounded-lg mb-6 flex items-center justify-center">
                <div class="text-6xl text-center text-green-700 dark:text-green-400" id="scenario-emoji">
                    {{ get_emoji(scenario.image) }}
                </div>
            </div>
            {# Descri√ß√£o do Cen√°rio #}
            <div class="text-center mb-6">
                <p class="text-lg text-gray-700 dark:text-gray-300" id="scenario-description">{{ scenario.scenario }}</p>
            </div>
        </div>
        {# Rodap√© do Card com Bot√µes de Decis√£o #}
        <div class="p-4 border-t border-green-200 dark:border-green-800">
            {# Removido action e method do form, bot√µes agora s√£o type="button" #}
            <div class="flex justify-between gap-4">
                {# Bot√£o N√£o #}
                <button type="button" id="button-no" value="no"
                        class="flex-1 py-4 px-4 border border-red-300 dark:border-red-700 rounded-md text-red-700 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-950/30 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150 flex items-center justify-center">
                    {# √çcone Ban (pode ser SVG ou texto) #}
                    <span class="mr-2">üö´</span>
                    N√£o
                </button>
                {# Bot√£o Sim #}
                <button type="button" id="button-yes" value="yes"
                        class="flex-1 py-4 px-4 border border-green-300 dark:border-green-700 rounded-md text-green-700 dark:text-green-300 hover:bg-green-50 dark:hover:bg-green-950/30 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150 flex items-center justify-center">
                    {# √çcone Check (pode ser SVG ou texto) #}
                    <span class="mr-2">‚úîÔ∏è</span>
                    Sim
                </button>
            </div>
        </div>
    </div>

    {# Notas do Seguran√ßa #}
    <div class="bg-amber-50 dark:bg-amber-950/30 p-4 rounded-lg border border-amber-200 dark:border-amber-800">
        <h3 class="font-medium mb-2 flex items-center text-amber-800 dark:text-amber-200">
            {# √çcone Shield (pode ser SVG ou texto) #}
            <span class="mr-2">üõ°Ô∏è</span>
            Notas do Seguran√ßa:
        </h3>
        <p class="text-sm text-amber-700 dark:text-amber-300">
            Como seguran√ßa do parque, voc√™ deve interpretar a regra "Proibido Ve√≠culos no Parque". Considere
            o prop√≥sito da regra: √â sobre seguran√ßa, ru√≠do, prote√ß√£o ambiental ou preserva√ß√£o da atmosfera natural?
            Sua interpreta√ß√£o guiar√° suas decis√µes.
        </p>
    </div>

    {# Script para definir a URL da API para o JS externo #}
    <script>
      // Passa a URL da API para o JavaScript externo
      window.handleDecisionUrl = "{{ url_for('handle_decision') }}";
    </script>
{% endblock %}
